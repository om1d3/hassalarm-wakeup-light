# Hassalarm wake-up light Integration
# scripts configuration
#
# add this to your scripts.yaml file

# ========================================
# BASIC LIGHT FLASH SCRIPT
# flashes a single light on/off every 2 seconds for 60 seconds
# ========================================
alarm_light_flash:
  alias: "Alarm light flash"
  sequence:
    - repeat:
        count: 30  # 30 cycles × 2 seconds = 60 seconds total
        sequence:
          - action: light.turn_off
            target:
              entity_id: light.bedroom  # CHANGE THIS to your light entity
          - delay:
              seconds: 1
          - action: light.turn_on
            target:
              entity_id: light.bedroom  # CHANGE THIS to your light entity
          - delay:
              seconds: 1

# ========================================
# ALTERNATIVE: MULTIPLE LIGHTS
# flash multiple lights simultaneously
# ========================================
alarm_light_flash_multi:
  alias: "Alarm multiple lights flash"
  sequence:
    - repeat:
        count: 30
        sequence:
          - action: light.turn_on
            target:
              entity_id:
                - light.bedroom_lamp
                - light.bedside_light
                - light.hallway_light
          - delay:
              seconds: 1
          - action: light.turn_off
            target:
              entity_id:
                - light.bedroom_lamp
                - light.bedside_light
                - light.hallway_light
          - delay:
              seconds: 1

# ========================================
# ALTERNATIVE: BRIGHTNESS RAMP
# gradually increase brightness from 0 to 100% over 60 seconds
# ========================================
alarm_light_ramp:
  alias: "Alarm light brightness ramp"
  sequence:
    - repeat:
        count: 10
        sequence:
          - action: light.turn_on
            target:
              entity_id: light.bedroom
            data:
              brightness: "{{ repeat.index * 25 }}"  # 0, 25, 50, 75... 250 (max 255)
              transition: 5
          - delay:
              seconds: 6

# ========================================
# ALTERNATIVE: COLOR CYCLE
# cycle through colors while flashing
# ========================================
alarm_light_color_cycle:
  alias: "Alarm light color cycle"
  sequence:
    - repeat:
        count: 30
        sequence:
          - action: light.turn_on
            target:
              entity_id: light.bedroom_rgb
            data:
              rgb_color: >
                {% set colors = [
                  [255, 0, 0],    # Red
                  [255, 127, 0],  # Orange
                  [255, 255, 0],  # Yellow
                  [0, 255, 0],    # Green
                  [0, 0, 255]     # Blue
                ] %}
                {{ colors[repeat.index % 5] }}
              brightness: 255
          - delay:
              seconds: 1
          - action: light.turn_off
            target:
              entity_id: light.bedroom_rgb
          - delay:
              seconds: 1

# ========================================
# ALTERNATIVE: FAST STROBE
# faster flashing for heavy sleepers
# ========================================
alarm_light_strobe:
  alias: "Alarm light fast strobe"
  sequence:
    - repeat:
        count: 60  # 60 cycles × 1 second = 60 seconds
        sequence:
          - action: light.turn_on
            target:
              entity_id: light.bedroom
            data:
              brightness: 255
          - delay:
              milliseconds: 500
          - action: light.turn_off
            target:
              entity_id: light.bedroom
          - delay:
              milliseconds: 500

# ========================================
# ALTERNATIVE: GENTLE WAKE
# longer, slower flashing for gentle wake-up
# ========================================
alarm_light_gentle:
  alias: "Alarm Light Gentle Wake"
  sequence:
    - repeat:
        count: 20  # 20 cycles × 6 seconds = 120 seconds
        sequence:
          - action: light.turn_on
            target:
              entity_id: light.bedroom
            data:
              brightness: 128  # 50% brightness
              transition: 2
          - delay:
              seconds: 3
          - action: light.turn_off
            target:
              entity_id: light.bedroom
            data:
              transition: 2
          - delay:
              seconds: 3

# ========================================
# MANUAL TEST SCRIPT
# use this to test your light setup without waiting for alarm
# ========================================
test_alarm_light:
  alias: "test Alarm light"
  sequence:
    - action: script.alarm_light_flash  # Change to whichever script you want to test
